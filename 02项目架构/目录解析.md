# 目录解析

* [ ] [入口函数](#程序入口maingo文件)
* [ ] [配置文件](#配置confappconf)
* [ ] [路由](#路由)
* [ ] 控制器
* [ ] Model

---

## 程序入口main.go文件

```go
package main

import (
    _ "beegoApi/routers"
    "github.com/astaxie/beego"
)

func main() {
    if beego.BConfig.RunMode == "dev" {
        // 加入swagger自动化api文档
        beego.BConfig.WebConfig.DirectoryIndex = true
        beego.BConfig.WebConfig.StaticDir["/swagger"] = "swagger"
    }
    beego.Run()
}
```

## 配置conf/app.conf

#### beego支持配置文件解析方式:INI、XML、JSON、YAML，默认采用INI

```go
#获取配置方式: 例如:AppName获取方式如下
#beego.BConfig.AppName  或 beego.AppConfig.String("appname")


#app工程名
appname = beegoApi
#beegoApi服务运行端口号
httpport = 8080
#beegoApi服务运行模式:dev/prod
runmode = dev
#自动渲染模板,默认值为true,API服务置为false
autorender = false

#在controller中this.Ctx.Input.RequestBody取body体时需要,默认为false（GET or HEAD or 上传文件请求除外）
#但试了下,true或false都可以获取.
copyrequestbody = false
sqlconn = 

#开启进程内监控
EnableAdmin = true
AdminAddr = 0.0.0.0
AdminPort = 8088

#自动化文档
EnableDocs = true
#启动时添加自动文档参数：bee run -gendoc=true -downdoc=true

#获取系统环境变量,并给予默认值
gopathtest = "${GOPATH||yes}"
gopathno = "${GOPATHNO||no}"

#支持section操作,ket通过section::key获取
[dev]
httpport = 8081
[prod]
httpport = 8082
```

#### 加载其他配置文件:

```go
beego.LoadAppConfig("ini", "conf/app2.conf") // 相同配置项会覆盖之前
```

#### 配置文档：

* [https://godoc.org/github.com/astaxie/beego/config](https://godoc.org/github.com/astaxie/beego/config)
* 配置参数解析：[https://beego.me/docs/mvc/controller/config.md](https://beego.me/docs/mvc/controller/config.md)

# 路由

1. ## RESTful Controller 路由

   固定路由

   ```go
   beego.Router("/admin/index", &admin.ArticleController{})
   ```

   正则路由

   ```go
   beego.Router(“/api/:id”, &controllers.RController{}) // 默认匹配 //例如对于URL”/api/123”可以匹配成功，此时变量”:id”值为”123”，但URL”/api/“匹配失败
   ```

   自定义方法及 RESTful 规则

   ```go
   beego.Router("/api/list",&RestController{},"*:ListFood")
   beego.Router("/api/create",&RestController{},"post:CreateFood")
   beego.Router("/api/update",&RestController{},"put:UpdateFood")
   beego.Router("/api/delete",&RestController{},"delete:DeleteFood")

   // e.g. beego.Router("/simple",&controllers.MainController{},"post:PostFunc;get:GetFunc")
   // MainController使用:
   func (m *MainController) GetFunc() {
       m.Data["json"] = "Get func .... "
       m.ServeJSON()
   }

   func (m *MainController) PostFunc() {
       m.Data["json"] = "post func .... "
       m.ServeJSON()
   }
   ```

2. ## 注解路由\(推荐\)

   用户无需在 router 中注册路由，只需要 Include 相应地 controller，然后在 controller 的 method 方法上面写上 router 注释（// @router）即可  
   详情可以见[Hello World](/02项目架构/工程搭建.md#打印hello-world)中.

```go
nsv2 := beego.NewNamespace("/v2",
		beego.NSNamespace("/main",
			beego.NSInclude(
				&controllers.MainController{},
			),
		),
	)
	beego.AddNamespace(nsV1/*, nsv2*/)
```

1. ## 更多详情

   [https://beego.me/docs/mvc/controller/router.md](https://beego.me/docs/mvc/controller/router.md)

## 



